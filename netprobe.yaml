---
probe:
  enabled: yes
  interval: 30
  count: 50
  device_id: "netprobe"
  sites:
    - google.com
    - youtube.com
    - facebook.com
    - twitter.com
  dns:
    test: google.com
    nameservers:
      - name: Google (Primary)
        ip: '8.8.8.8'
      - name: Cloudflare (Primary)
        ip: '1.1.1.1'
      - name: Google (Secondary)
        ip: '8.8.4.4'
      - name: Cloudflare (Secondary)
        ip: '1.0.0.1'
    local:
      - name: Router
        ip: '192.168.2.1'
datastore:
  probe:
    type: FILE
    topic: netprobe/probe
  speedtest:
    type: FILE
    topic: netprobe/speedtest

  mqtt:
    host: 'localhost'
    port: 1883
    username: ''
    password: ''
    # client_id: 'netprobe'
    # keepalive: 60
    # qos: 0
    # retain: no
  file:
    path: /data/cache
  redis:
    host: 'localhost'
    port: 6379
    db: 0
    password: ''
  mongodb:
    url: 'mongodb://localhost:27017/admin'
    db: 'netprobe'
    collection: 'netprobe'
  http:
    verify_ssl: no
    read:
      url: 'http://localhost:8080/netprobe/data/:topic'
      method: 'GET'
      timeout: 5
      headers: {}
      cookies: {}
      params: {}
      auth: {}
    write:
      url: 'http://localhost:8080/netprobe/data/:topic'
      method: 'POST'
      timeout: 5
      headers: {}
      cookies: {}
      params: {}
      auth: {}

logging:
  # This is the minimum log level for the application
  # Values:
  #   - DEBUG
  #   - INFO
  #   - WARNING
  #   - ERROR
  #   - CRITICAL
  level: "DEBUG"
  # Output format for the logs
  format: "%(asctime)s [%(levelname)s] [%(name)s] %(message)s"
  # Date format for the logs
  date_format: "%Y-%m-%d %H:%M:%S"

presentation:
  # Bind port for the /metrics interface
  port: 5000
  # Bind interface for the /metrics interface
  interface: '0.0.0.0'

speedtest:
  # Speetest configuration (be very careful when running on a metered connection!)
  # - This configuration is for setting up a "speed test" or rather a test of your internet bandwidth.
  # - In order to test your upload and download bandwidth we use speedtest.net as source. So your
  #   client will connect there and upload and download some data.
  # - That also means that a random server is selected for the test (usually the nearest one)
  # - Setting the SPEEDTEST_INTERVAL too aggressive will cause speedtest.net to block your requests,
  #   recommend 15 minutes (900 seconds) and above
  # set this to "True" to enable speed test function
  # Setting this to "False" will disable the speed test function but will still attempt to read the
  # speedtest data from the cache
  # If you do not want to read from the cache, set this to "False" and set the NP_DATASTORE_SPEEDTEST_TYPE to "NONE"
  enabled: no
  # interval on which the speedtest will run, in seconds - note using a prime number helps reduce the number
  # of collisions between netprobe and speed tests
  interval: 937

health:
  weights:
    # These are the relative weights used to calculate your 'Internet Quality Score', they can be modified but must add up to 1.0
    loss: 0.4
    latency: 0.15
    jitter: 0.2
    external_dns_latency: 0.01
    internal_dns_latency: 0.04
    speedtest_download: 0.1
    speedtest_upload: 0.1
    # if this is no, enforce is yes, and speedtest.enabled is no, then the health will be offset
    # by the speedtest_download and speedtest_upload weights
    # if rebalance is yes, and enforce is yes, then it will not rebalance the weights of the speedtest
    # if rebalance is yes, and enforce is no, then it will rebalance the weights of the speedtest
    # by applying the weights of the speedtest_download and speedtest_upload to the loss. 
    speedtest_rebalance: no
    speedtest_enforce: yes
  thresholds:
    # loss thresholds are in percentage
    loss: 5
    # latency thresholds are in milliseconds
    latency: 100
    # jitter thresholds are in milliseconds
    jitter: 30
    # dns thresholds are in milliseconds
    external_dns_latency: 100
    internal_dns_latency: 100
    # speedtest thresholds are in Mbps
    # Set to what you expect your minimum download and upload speeds to be
    # to be considered healthy
    speedtest_download: 200
    speedtest_upload: 200
